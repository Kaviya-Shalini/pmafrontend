<div
  class="min-h-screen w-full flex flex-col bg-gradient-to-tr from-indigo-950 via-purple-900 to-pink-800 text-white relative overflow-hidden">

  <!-- Floating Glows -->
  <div class="absolute top-20 left-10 w-[400px] h-[400px] bg-pink-500 opacity-30 blur-[160px] animate-pulse-slow"></div>
  <div class="absolute bottom-20 right-10 w-[400px] h-[400px] bg-indigo-400 opacity-20 blur-[180px] animate-pulse-slow"></div>

  <!-- Header -->
  <header class="flex flex-col md:flex-row justify-between items-start md:items-center p-8 z-10">
    <div>
      <h1 class="text-4xl font-extrabold tracking-wide drop-shadow-lg">
        Welcome back, <span class="text-yellow-300">{{ user?.username }}</span>
      </h1>
      <p class="text-sm opacity-70 mt-2">Here’s a quick look at your memory insights ✨</p>
    </div>
    <span *ngIf="user?.isAlzheimer"
      class="px-4 py-1 bg-red-500/20 text-red-300 text-sm rounded-full mt-4 md:mt-0 shadow-md">
      🧠 Alzheimer Patient
    </span>
  </header>

  <!-- KPIs Section -->
  <section class="grid grid-cols-1 md:grid-cols-3 gap-6 px-8 mb-10 z-10">
    <div
      class="bg-white/10 rounded-2xl p-6 shadow-lg backdrop-blur-md border border-white/10 hover:scale-105 transition-transform duration-300">
      <div class="flex justify-between items-center">
        <p class="text-sm opacity-80">Top Category</p>
        <span class="text-yellow-300 text-xl">🏷️</span>
      </div>
      <h2 class="text-3xl font-bold mt-2 text-white drop-shadow">{{ getTopCategory() }}</h2>
      <p class="text-xs text-white/60 mt-2">Your most frequent type of memory</p>
    </div>

    <div
      class="bg-white/10 rounded-2xl p-6 shadow-lg backdrop-blur-md border border-white/10 hover:scale-105 transition-transform duration-300">
      <div class="flex justify-between items-center">
        <p class="text-sm opacity-80">Total Memories</p>
        <span class="text-yellow-300 text-xl">📚</span>
      </div>
      <h2 class="text-3xl font-bold mt-2 text-white drop-shadow">{{ memories.length || 0 }}</h2>
      <p class="text-xs text-white/60 mt-2">Total memories saved so far</p>
    </div>

    <div
      class="bg-white/10 rounded-2xl p-6 shadow-lg backdrop-blur-md border border-white/10 hover:scale-105 transition-transform duration-300">
      <div class="flex justify-between items-center">
        <p class="text-sm opacity-80">Latest Upload</p>
        <span class="text-yellow-300 text-xl">🕒</span>
      </div>
      <h2 class="text-2xl font-semibold mt-2">{{ recentMemories[0]?.title || '-' }}</h2>
      <p class="text-xs text-white/60 mt-1">{{ recentMemories[0]?.createdAt | date:'short' }}</p>
    </div>
  </section>

  <!-- Charts Section -->
  <section class="grid grid-cols-1 md:grid-cols-3 gap-6 px-8 mb-14 z-10">
    <div
      class="bg-white/10 rounded-2xl p-5 shadow-lg backdrop-blur-md border border-white/10 hover:shadow-xl transition-all duration-300">
      <h3 class="text-lg font-semibold mb-3 text-yellow-300">Category Distribution</h3>
      <canvas #pieChart></canvas>
    </div>

    <div
      class="bg-white/10 rounded-2xl p-5 shadow-lg backdrop-blur-md border border-white/10 hover:shadow-xl transition-all duration-300">
      <h3 class="text-lg font-semibold mb-3 text-yellow-300">Upload Frequency</h3>
      <canvas #barChart></canvas>
    </div>

    <div
      class="bg-white/10 rounded-2xl p-5 shadow-lg backdrop-blur-md border border-white/10 hover:shadow-xl transition-all duration-300">
      <h3 class="text-lg font-semibold mb-3 text-yellow-300">Memory Trend</h3>
      <canvas #lineChart></canvas>
    </div>
  </section>

  <!-- Recent Memories Section -->
  <section class="px-8 pb-10 z-10">
    <h2 class="text-2xl font-bold mb-5 drop-shadow-lg">🧾 Recent Memories</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-5">
      <div *ngFor="let memory of recentMemories"
        class="bg-gradient-to-br from-indigo-600 to-purple-600 p-5 rounded-xl hover:scale-105 hover:shadow-xl 
               transition-transform duration-300 cursor-pointer backdrop-blur-md border border-white/10">

        <h3 class="font-bold text-lg truncate">{{ memory.title }}</h3>
        <p class="text-sm opacity-80 mt-1">{{ memory.category === 'other' ? memory.customCategory : memory.category }}</p>
        <p class="text-xs opacity-70 mt-2 line-clamp-2">{{ memory.description }}</p>
        <p class="text-[11px] opacity-50 mt-2">{{ memory.createdAt | date:'short' }}</p>

        <div class="flex justify-end mt-3">
          <button
            class="px-3 py-1 text-xs rounded-full bg-yellow-400 text-indigo-950 font-semibold hover:scale-110 transition-all duration-300">
            View
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Floating Call-to-Action -->
  

  <!-- Footer -->
  <footer class="text-center py-6 text-sm opacity-70 mt-10 z-10">
    © 2025 Memory Care • Designed with 💜 for Compassion
  </footer>
</div>
